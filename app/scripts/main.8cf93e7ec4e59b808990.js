(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,i,s,r,l=[],c=!0,o=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(t){o=!0,i=t}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(o)throw i}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function a(e,n){for(var a=0;a<n.length;a++){var i=n[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(s=i.key,r=void 0,r=function(e,n){if("object"!==t(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,n||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(s,"string"),"symbol"===t(r)?r:String(r)),i)}var s,r}var i={1:[["Backquote"],["Digit1"],["Digit2"],["Digit3"],["Digit4"],["Digit5"],["Digit6"],["Digit7"],["Digit8"],["Digit9"],["Digit0"],["Minus"],["Equal"],["Backspace"]],2:[["Tab"],["KeyQ"],["KeyW"],["KeyE"],["KeyR"],["KeyT"],["KeyY"],["KeyU"],["KeyI"],["KeyO"],["KeyP"],["BracketLeft"],["BracketRight"],["Backslash"],["Delete"]],3:[["CapsLock"],["KeyA"],["KeyS"],["KeyD"],["KeyF"],["KeyG"],["KeyH"],["KeyJ"],["KeyK"],["KeyL"],["Semicolon"],["Quote"],["Enter"]],4:[["ShiftLeft"],["IntlBackslash"],["KeyZ"],["KeyX"],["KeyC"],["KeyV"],["KeyB"],["KeyN"],["KeyM"],["Comma"],["Period"],["Slash"],["inner_up"],["ShiftRight"]],5:[["ControlLeft"],["MetaLeft"],["AltLeft"],["Space"],["AltRight"],["ControlRight"],["inner_left"],["inner_down"],["inner_right"]]},s={1:[["ё"],["1","!"],["2",'"'],["3","№"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Backspace"]],2:[["Tab"],["й"],["ц"],["у"],["к"],["е"],["н"],["г"],["ш"],["щ"],["з"],["х"],["ъ"],["\\","|"],["Del"]],3:[["Caps lock"],["ф"],["ы"],["в"],["а"],["п"],["р"],["о"],["л"],["д"],["ж"],["э"],["Enter"]],4:[["Shift"],["\\","|"],["я"],["ч"],["с"],["м"],["и"],["т"],["ь"],["б"],["ю"],[".",","],["inner_up"],["Shift"]],5:[["Ctrl"],["Win"],["Alt"],["space"],["Alt"],["Ctrl"],["inner_left"],["inner_down"],["inner_right"]]},r={1:[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Backspace"]],2:[["Tab"],["q"],["w"],["e"],["r"],["t"],["y"],["u"],["i"],["o"],["p"],["[","{"],["]","}"],["\\","|"],["Del"]],3:[["Caps lock"],["a"],["s"],["d"],["f"],["g"],["h"],["j"],["k"],["l"],[";",":"],["'",'"'],["Enter"]],4:[["Shift"],["\\","|"],["z"],["x"],["c"],["v"],["b"],["n"],["m"],[",","<"],[".",">"],["/","?"],["inner_up"],["Shift"]],5:[["Ctrl"],["Win"],["Alt"],["space"],["Alt"],["Ctrl"],["inner_left"],["inner_down"],["inner_right"]]},l=localStorage.getItem("alph")?localStorage.getItem("alph"):navigator.language.slice(0,2).toLowerCase(),c="",o=!1,u=!1,d=!1,h=!1;window.addEventListener("beforeunload",(function(){return localStorage.setItem("alph",l)})),(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.alph="ru"===l?s:r}var n,f,v;return n=t,v=[{key:"createNode",value:function(t){for(var e,n=document.createElement(t),a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return(e=n.classList).add.apply(e,i),n}},{key:"insertNode",value:function(t,e){var n=t;"string"==typeof e?n.textContent=e:n.append(e)}},{key:"switchLang",value:function(){document.body.innerHTML="",l="en"===l?"ru":"en",c=this.textArea.value,(new t).build()}},{key:"clickDown",value:function(e){var n,a;e.target.closest(".btn")&&(a=(n=e.target.closest(".btn")).querySelector(".btn__inner"),n.classList.add("btn_active"),this.setTextAreaValue(n,a),n.classList.contains("btn_caps")&&(h=!h,n.classList.toggle("btn_caps_active")),t.setSpecBtn(n))}},{key:"clickUp",value:function(e){var n;e.target.closest(".btn")&&((n=e.target.closest(".btn")).classList.remove("btn_active"),t.setShortcats(this),t.setSpecBtn(n))}},{key:"mouseOut",value:function(t){t.target.classList.contains("btn_active")&&!t.relatedTarget.classList.contains("btn__inner")&&t.target.closest(".btn").classList.remove("btn_active")}},{key:"pressDown",value:function(e){this.textArea.focus();var n=t.findBtn(e);if(n){n.classList.add("btn_active"),t.setSpecBtn(n,e.repeat),"CapsLock"===n.dataset.value&&(h=e.repeat?h:!h,e.repeat||n.classList.toggle("btn_caps_active"));var a=n.querySelector(".btn__inner");if(n.dataset.value.match(/./)&&o)return;this.setTextAreaValue(n,a),e.preventDefault()}}},{key:"pressUp",value:function(e){var n=t.findBtn(e);t.setShortcats.bind(this)(this),t.setSpecBtn(n),n&&n.classList.remove("btn_active")}},{key:"findBtn",value:function(t){return t.code.includes("Arrow")?document.querySelector('[data-value="inner_'.concat(t.code.slice(5).toLowerCase(),'"]')):"AltRight"===t.code?document.querySelector('[data-value="AltRight"]'):document.querySelector('[data-value="'.concat(t.code,'"]'))}},{key:"setSpecBtn",value:function(t){!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&t&&(t.dataset.value.includes("Shift")&&(d=!!t.classList.contains("btn_active")&&!d),t.dataset.value.includes("Alt")&&(u=!!t.classList.contains("btn_active")&&!u),t.dataset.value.includes("Control")&&(o=!!t.classList.contains("btn_active")&&!o))}},{key:"findBtnValue",value:function(t,e,n){var a="";return n.textContent.match(/^[^A-Za-zА-Яа-яёЁ]$/)?d&&!u?a+=e.textContent[0]:d&&u?a="":a+=n.textContent:e.className.match(/(caps|space|shift|enter|win|del|ctrl|tab|Alt)/)||n.className.match(/inner_./)?e.classList.contains("btn_tab")&&!d?a+="    ":e.classList.contains("btn_space")?a+=" ":e.classList.contains("btn_enter")&&(a+="\n"):a+=!d||u||h?!d&&h?n.textContent:d&&!u&&h?n.textContent.toLowerCase():d&&u?t.value:n.textContent.toLowerCase():n.textContent,a}},{key:"useBackspace",value:function(t,e,n,a,i){var s,r,l,c;return a?(c=t.slice(e,n),s=t.slice(0,e)+t.slice(n)):o?(l=(r=i.match(/[a-zA-ZА-Яа-я0-9ёЁ]+/)?t.slice(0,e).match(/[a-zA-ZА-Яа-я0-9ёЁ]+$/):t.slice(0,e).match(/[^a-zA-ZА-Яа-я0-9ёЁ]+$/))?0+r.index:0,c=t.slice(l,e),s=t.slice(0,l)+t.slice(n)):(c=t.slice(e-1,n),s=t.slice(0,e-1)+t.slice(n)),{newValue:s,deleted:c}}},{key:"useDel",value:function(t,e,n,a,i){var s,r,l,c;return a?(c=t.slice(e,n),s=t.slice(0,e)+t.slice(n)):o&&i?(l=(r=i.match(/[a-zA-ZА-Яа-я0-9ёЁ]+/)?t.slice(n,t.length).match(/[^a-zA-ZА-Яа-я0-9ёЁ]+?/):t.slice(n,t.length).match(/[a-zA-ZА-Яа-я0-9ёЁ]+?/))?n+r.index:t.length,c=t.slice(n,l),s=t.slice(0,n)+t.slice(l,t.length)):(c=t.slice(e,n+1),s=t.slice(0,e)+t.slice(n+1)),{newValue:s,deleted:c}}},{key:"useArrows",value:function(t,e,n,a,i,s,r){var l,c,u,h;if("inner_left"===t.dataset.value&&(o&&n>0?(l=h=(u=s.match(/[a-zA-ZА-Яа-я0-9ёЁ]+/)?e.slice(0,n).match(/[a-zA-ZА-Яа-я0-9ёЁ]+$/):e.slice(0,n).match(/[^a-zA-ZА-Яа-я0-9ёЁ]+$/))?0+u.index:0,c=d?a:h):d&&n>0?(l=n-1,c=a):d&&!n?(l=0,c=a):i?(l=n,c=n):n>0&&(l=n-1,c=n-1)),"inner_right"===t.dataset.value&&(o&&a<e.length?(c=h=(u=r.match(/[a-zA-ZА-Яа-я0-9ёЁ]+/)?e.slice(a,e.length).match(/[^a-zA-ZА-Яа-я0-9ёЁ]+?/):e.slice(a,e.length).match(/[a-zA-ZА-Яа-я0-9ёЁ]+?/))?a+u.index:e.length,l=d?n:h):d&&n<e.length?(l=n,c=a+1):d&&a===e.length?(l=n,c=e.length):i?(l=a,c=a):a<e.length?(l=n+1,c=n+1):n===e.length&&(l=e.length,c=e.length)),"inner_up"===t.dataset.value){var f=e.slice(0,n).lastIndexOf("\n");f=f<0?0:f;var v=e.slice(0,f).lastIndexOf("\n")+1,b=n-(f+1);l=f-v<b?f:v+b,c=d?a:l}if("inner_down"===t.dataset.value){var y=e.slice(0,a).lastIndexOf("\n")+1,p=e.indexOf("\n",y)+1;p=0===p?e.length:p;var g=e.indexOf("\n",p);g=-1===g?e.length:g;var m=e.slice(y,a).length;c=(c=p===e.length?e.length:p+m)>g?g:c,l=d?n:c}return{start:l,end:c}}},{key:"setShortcats",value:function(e){d&&u&&t.switchLang.call(e)}}],(f=[{key:"build",value:function(){this.createElements(),this.insertElements(),this.bindEvents(),this.textArea.focus()}},{key:"createButtons",value:function(){var n=this,a=[];return Object.keys(this.alph).forEach((function(s){var r=t.createNode("div","keyboard__line");n.alph[s].forEach((function(a,l){var c=t.createNode("div","btn__inner"),o=t.createNode("div","btn");a[1]&&t.insertNode(o,a[1]),a[0].length&&!a[0].match(/(inner|^space$)/)&&(a[0].length>1?t.insertNode(c,a[0]):t.insertNode(c,a[0].toUpperCase()));var u=e(i[s][l],1);o.dataset.value=u[0],(a[0].length>1||a===n.alph[1][0])&&"space"!==a[0]&&o.classList.add("btn_bordered"),a[0].match(/inner/)&&c.classList.add("btn__".concat(a[0])),"Tab"===a[0]?o.classList.add("btn_tab"):"Caps lock"===a[0]?(o.classList.add("btn_caps"),h&&o.classList.add("btn_caps_active")):"Ctrl"===a[0]?n.alph[s].indexOf(a)>0?o.classList.add("btn_rctrl"):o.classList.add("btn_lctrl"):"Win"===a[0]?o.classList.add("btn_win"):"Alt"===a[0]?n.alph[s].indexOf(a)>2?o.classList.add("btn_rAlt"):o.classList.add("btn_lAlt"):"Shift"===a[0]?n.alph[s].indexOf(a)>0?o.classList.add("btn_rshift"):o.classList.add("btn_lshift"):"space"===a[0]?o.classList.add("btn_space"):"Backspace"===a[0]?o.classList.add("btn_backspace"):"Enter"===a[0]?o.classList.add("btn_enter"):"Del"===a[0]&&o.classList.add("btn_del"),t.insertNode(o,c),t.insertNode(r,o)})),a.push(r)})),a}},{key:"createElements",value:function(){this.buttons=this.createButtons(),this.main=t.createNode("main","wrapper"),this.textArea=t.createNode("textarea","wrapper__input"),this.textArea.value=c,this.keyboard=t.createNode("div","keyboard"),this.footer=t.createNode("footer","footer"),this.footerText=t.createNode("p","footer__text"),this.footerBtn=t.createNode("button","footer__btn")}},{key:"insertElements",value:function(){var e=this;this.text="en"===l?"The keyboard was created for windows. To change the language, press the button below or the key combination left shift + left alt":"Клавиатура была создана для windows. Для смены языка нажмите кнопку снизу или комбинацию клавиш левый shift + левый alt",t.insertNode(this.footerBtn,l.slice(0,1).toUpperCase()+l.slice(1)),t.insertNode(this.footerText,this.text),t.insertNode(this.footer,this.footerText),t.insertNode(this.footer,this.footerBtn),this.buttons.forEach((function(n){return t.insertNode(e.keyboard,n)})),t.insertNode(this.main,this.textArea),t.insertNode(this.main,this.keyboard),t.insertNode(document.body,this.main),t.insertNode(document.body,this.footer)}},{key:"bindEvents",value:function(){var e=t.switchLang.bind(this),n=t.clickDown.bind(this),a=t.clickUp.bind(this),i=t.mouseOut.bind(this),s=t.pressDown.bind(this),r=t.pressUp.bind(this);this.footerBtn.addEventListener("click",e),this.main.addEventListener("mousedown",n),this.main.addEventListener("mouseup",a),this.main.addEventListener("mouseout",i),this.main.addEventListener("keydown",s),this.main.addEventListener("keyup",r),this.textArea.addEventListener("focusout",(function(t){t.preventDefault(),t.target.focus()}))}},{key:"setTextAreaValue",value:function(e,n){var a,i,s,r=this.textArea.selectionStart,l=this.textArea.selectionEnd,c=this.textArea.value,o=!1,u=!1,d=l-r,h=c[r-1],f=c[l];if(e.classList.contains("btn_backspace"))0===r&&0===l||(s=t.useBackspace(c,r,l,d,h).newValue,a=t.useBackspace(c,r,l,d,h).deleted,o=!0);else if(e.classList.contains("btn_del"))s=t.useDel(c,r,l,d,f).newValue,a=t.useDel(c,r,l,d,f).deleted,u=!0;else if(e.dataset.value.includes("inner")){var v=t.useArrows(e,c,r,l,d,h,f);this.textArea.selectionStart=v.start,this.textArea.selectionEnd=v.end}else i=t.findBtnValue(this.textArea,e,n),s=c.slice(0,r)+i+c.slice(l);i?(this.textArea.value=s,this.textArea.selectionStart=r+i.length,this.textArea.selectionEnd=r+i.length):o?(this.textArea.value=s,d?(this.textArea.selectionStart=r,this.textArea.selectionEnd=r):(this.textArea.selectionStart=r-a.length,this.textArea.selectionEnd=l-a.length)):u&&(this.textArea.value=s,this.textArea.selectionStart=r,this.textArea.selectionEnd=r)}}])&&a(n.prototype,f),v&&a(n,v),Object.defineProperty(n,"prototype",{writable:!1}),t}())).build()})();